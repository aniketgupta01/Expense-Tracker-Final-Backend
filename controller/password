const Sib = require('sib-api-v3-sdk');

require('dotenv').config();

const client = Sib.ApiClient.instance;

const apiKey = client.authentications['api-key'];

apiKey.apiKey = process.env.SENDINBLUE_API_KEY;

const transactionalEMailApi = new Sib.TransactionalEmailsApi();



exports.forgotPassword = (req,res,next) => {
    const emailId = req.body.email;
    

    const sender = {
        name:'Aniket',
        email: 'aniketgupta8088@gmail.com'
    }
    const receivers = [
        {   
            email: emailId,
        },
    
    
    ]
    

    

    
    
    transactionalEMailApi.sendTransacEmail({
        sender,
        to: receivers,
        subject:'This is just an dummy email',
        textContent:`A dummy email`
    })
    .then(() => {
        res.status(200).json({message:"Email sent"})
    })
    .catch(err => console.log(err));
    
    

}